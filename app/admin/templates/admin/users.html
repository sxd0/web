{% extends "admin/layout.html" %}
{% block title %}–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏{% endblock %}
{% block content %}
<h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>

<form method="get" class="mb-3">
  <select name="role_id" class="form-select" onchange="this.form.submit()">
    <option value="0">–í—Å–µ —Ä–æ–ª–∏</option>
    {% for user in users %}
      {% if user.role %}
        <option value="{{ user.role.id }}"
                {% if role_id == user.role.id %}selected{% endif %}>
          {{ user.role.name }}
        </option>
      {% endif %}
    {% endfor %}
  </select>
</form>

<a href="/admin/users/create">+ –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>ID</th>
      <th>–ò–º—è</th>
      <th>Email</th>
      <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
      <th>–†–æ–ª—å</th>
      <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr>
      <td>{{ user.id }}</td>
      <td><a href="/admin/users/{{ user.id }}/edit">{{ user.username }}</a></td>
      <td>{{ user.email }}</td>
      <td>{{ user.created_at.strftime('%Y-%m-%d') }}</td>
      <td>{{ user.role.name if user.role else '‚Äî' }}</td>
      <td>
        <a href="/admin/users/{{ user.id }}/edit">‚úé</a>
        <a href="/admin/users/{{ user.id }}/delete" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')">üóë</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
